<!DOCTYPE html>
<html>
<head>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #f0f0f0;
            perspective: 800px;
        }
        .card {
            width: 300px;
            height: 400px;
            background-image: linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 50%, #ccc 50%, #ccc 75%, transparent 75%, transparent);
            background-size: 20px 20px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            display: flex;
            justify-content: center;
            align-items: center;
            transition: transform 0.5s;
            cursor: pointer;
            position: relative;
            transform-style: preserve-3d;
        }
        .card.rotated {
            transform: rotateY(180deg);
        }
        .card__face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        .card__face--back {
            transform: rotateY(180deg);
        }
        img {
            width: 150px;
            height: 150px;
        }
        .card__spark {
            position: absolute;
            width: 20px;
            height: 20px;
            background-color: #ffd700;
            border-radius: 10px;
            opacity: 0;
            transition: opacity 0.5s, transform 0.5s;
        }
        .card.rotated .card__spark {
            opacity: 1;
            transform: translateY(-50px);
        }
        .card__spark--1 {
            top: 20px;
            left: 20px;
        }
        .card__spark--2 {
            top: 20px;
            right: 20px;
        }
        .card__spark--3 {
            bottom: 20px;
            left: 20px;
        }
        .card__spark--4 {
            bottom: 20px;
            right: 20px;
        }
        .card__spark--5 {
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            animation: spark 0.5s linear infinite;
            opacity: 0;
        }
        .card.rotated .card__spark--5 {
            opacity: 1;
            animation-delay: 0.5s;
        }
        @keyframes spark {
            0% {
                transform: translate(-50%, -50%) scale(0);
                opacity: 1;
            }
            50% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 1;
            }
            100% {
                transform: translate(-50%, -50%) scale(0);
                opacity: 0;
            }
        }
        @media (max-width: 600px) {
            .card {
                width: 250px;
                height: 350px;
            }
            img {
                width: 125px;
                height: 125px;
            }
        }
    </style>
</head>
<body>
    <div id="card" class="card">
        <div class="card__face card__face--front">
            <img id="pokemon-image" src="">
            <h2 id="pokemon-name"></h2>
            <div class="card__spark card__spark--1"></div>
            <div class="card__spark card__spark--2"></div>
            <div class="card__spark card__spark--3"></div>
            <div class="card__spark card__spark--4"></div>
            <div class="card__spark card__spark--5"></div>
        </div>
        <div class="card__face card__face--back">
            <h3>Abilities:</h3>
            <ul id="pokemon-abilities"></ul>
        </div>
    </div>

<script>
    let isFront = true; // Keep track of whether the front of the card is showing
    let nextPokemonData = null; // Store data about the next Pokémon to be displayed

    // Fetch data about a random Pokémon from the PokeAPI
    function fetchRandomPokemon() {
        const randomId = Math.floor(Math.random() * 898) + 1; // There are 898 Pokémon in the National Pokédex
        fetch(`https://pokeapi.co/api/v2/pokemon/${randomId}`)
            .then(response => response.json())
            .then(data => {
                nextPokemonData = data; // Store the data for later
            })
            .catch(error => console.error('Error:', error));
    }

    // Update the display with data about the next Pokémon
    function updateDisplay() {
        // Display the Pokémon's name and image on the front of the card
        document.getElementById('pokemon-name').textContent = nextPokemonData.name;
        document.getElementById('pokemon-image').src = nextPokemonData.sprites.front_default;

        // Display the Pokémon's abilities on the back of the card
        const abilitiesList = document.getElementById('pokemon-abilities');
        abilitiesList.innerHTML = ''; // Clear the list of previous abilities
        nextPokemonData.abilities.forEach(ability => {
            const abilityItem = document.createElement('li');
            abilityItem.textContent = ability.ability.name;
            abilitiesList.appendChild(abilityItem);
        });

        nextPokemonData = null; // Clear the data for the next Pokémon
    }

    // Fetch data about a random Pokémon when the page loads
    fetchRandomPokemon();

    // Rotate the card and fetch data about a random Pokémon when it's clicked, if the back is showing
    document.getElementById('card').addEventListener('click', function() {
        this.classList.toggle('rotated');
        if (!isFront) {
            fetchRandomPokemon();
        } else if (nextPokemonData) {
            updateDisplay();
        }
        isFront = !isFront; // Update the state of the card
    });
</script>
</body>
</html>
